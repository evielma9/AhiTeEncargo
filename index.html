<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ah√≠TeEncargo SLRC - Antojos a Domicilio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .product-card { transition: transform 0.2s; }
        .product-card:active { transform: scale(0.95); }
        #cart-modal { display: none; }
    </style>
</head>
<body class="bg-gray-100 pb-20">

    <header class="bg-blue-600 text-white p-4 sticky top-0 z-50 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold italic">Ah√≠TeEncargo SLRC</h1>
            <button onclick="toggleCart()" class="relative">
                <i class="fas fa-shopping-cart text-2xl"></i>
                <span id="cart-count" class="absolute -top-2 -right-2 bg-orange-500 text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
            </button>
        </div>
    </header>

    <div class="bg-orange-100 p-2 text-center text-sm font-medium text-orange-800 border-b border-orange-200">
        M√≠nimo de compra $150 | Env√≠o: D√≠a $30 / Noche $40
    </div>

    <main class="container mx-auto p-4">
        <h2 class="text-lg font-bold mb-4 text-gray-700 uppercase">üçø Botanas y Antojos</h2>
        <div class="grid grid-cols-2 gap-4" id="productos-lista">
            </div>
    </main>

    <footer class="bg-white p-6 mt-10 text-center border-t">
        <p class="mb-4 font-bold text-gray-600">S√≠guenos en nuestras redes:</p>
        <div class="flex justify-center space-x-6 text-2xl text-blue-600">
            <a href="#"><i class="fab fa-facebook"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-tiktok text-black"></i></a>
        </div>
        <p class="mt-4 text-xs text-gray-400">San Luis R√≠o Colorado, Sonora</p>
    </footer>

    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-50 z-[60] flex justify-end">
        <div class="bg-white w-full max-w-md h-full p-6 overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Tu Pedido</h2>
                <button onclick="toggleCart()" class="text-2xl">&times;</button>
            </div>
            
            <div id="cart-items" class="space-y-4 mb-6">
                </div>

            <div class="border-t pt-4 space-y-2">
                <div class="flex justify-between text-gray-600">
                    <span>Subtotal:</span>
                    <span id="subtotal">$0.00</span>
                </div>
                <div class="flex justify-between text-gray-600">
                    <span>Env√≠o (<span id="horario-texto">--</span>):</span>
                    <span id="envio-costo">$0.00</span>
                </div>
                <div class="flex justify-between text-xl font-bold text-blue-600">
                    <span>Total:</span>
                    <span id="total-final">$0.00</span>
                </div>
            </div>

            <div id="min-warning" class="mt-4 text-red-500 text-sm hidden">
                ‚ö†Ô∏è El pedido m√≠nimo es de $150.00 pesos.
            </div>

            <button onclick="enviarWhatsApp()" id="btn-checkout" class="w-full bg-green-500 text-white py-4 rounded-xl font-bold mt-6 flex items-center justify-center space-x-2">
                <i class="fab fa-whatsapp text-xl"></i>
                <span>PEDIR POR WHATSAPP</span>
            </button>
            
            <button class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold mt-3 opacity-50 cursor-not-allowed">
                PAGAR CON TARJETA (Pr√≥ximamente)
            </button>
        </div>
    </div>

    <script>
        const productos = [
            { id: 1, nombre: "Papitas Grandes", precio: 65, img: "https://via.placeholder.com/150?text=Papitas" },
            { id: 2, nombre: "Papitas Chicas", precio: 25, img: "https://via.placeholder.com/150?text=Papitas" },
            { id: 3, nombre: "Coca Cola 600ml", precio: 22, img: "https://via.placeholder.com/150?text=Coca" },
            { id: 4, nombre: "Sprite 600ml", precio: 20, img: "https://via.placeholder.com/150?text=Sprite" },
            { id: 5, nombre: "Panecitos G", precio: 35, img: "https://via.placeholder.com/150?text=Pan" },
            { id: 6, nombre: "Bebida Energ√©tica", precio: 45, img: "https://via.placeholder.com/150?text=Monster" }
        ];

        let carrito = [];

        function renderProductos() {
            const container = document.getElementById('productos-lista');
            container.innerHTML = productos.map(p => `
                <div class="bg-white p-3 rounded-xl shadow-sm product-card">
                    <img src="${p.img}" class="w-full h-32 object-cover rounded-lg mb-2">
                    <h3 class="font-bold text-sm">${p.nombre}</h3>
                    <p class="text-blue-600 font-bold">$${p.precio}</p>
                    <button onclick="agregar(${p.id})" class="mt-2 w-full bg-blue-600 text-white py-1 rounded-lg text-sm">+ Agregar</button>
                </div>
            `).join('');
        }

        function agregar(id) {
            const producto = productos.find(p => p.id === id);
            carrito.push(producto);
            actualizarCarrito();
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            modal.style.display = modal.style.display === 'flex' ? 'none' : 'flex';
            actualizarCarrito();
        }

        function actualizarCarrito() {
            document.getElementById('cart-count').innerText = carrito.length;
            const itemsContainer = document.getElementById('cart-items');
            const subtotalSpan = document.getElementById('subtotal');
            const envioSpan = document.getElementById('envio-costo');
            const totalSpan = document.getElementById('total-final');
            const warning = document.getElementById('min-warning');
            const btn = document.getElementById('btn-checkout');

            let subtotal = carrito.reduce((sum, p) => sum + p.precio, 0);
            
            // L√≥gica de horario (D√≠a: 6am - 8pm, Noche: 8pm - 6am)
            const hora = new Date().getHours();
            const esNoche = (hora >= 20 || hora < 6);
            const costoEnvio = carrito.length > 0 ? (esNoche ? 40 : 30) : 0;
            
            document.getElementById('horario-texto').innerText = esNoche ? "Noche" : "D√≠a";
            
            itemsContainer.innerHTML = carrito.map((p, index) => `
                <div class="flex justify-between items-center text-sm">
                    <span>${p.nombre}</span>
                    <div class="flex items-center space-x-2">
                        <span>$${p.precio}</span>
                        <button onclick="eliminar(${index})" class="text-red-500"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            `).join('');

            subtotalSpan.innerText = `$${subtotal.toFixed(2)}`;
            envioSpan.innerText = `$${costoEnvio.toFixed(2)}`;
            totalSpan.innerText = `$${(subtotal + costoEnvio).toFixed(2)}`;

            if (subtotal < 150 && carrito.length > 0) {
                warning.classList.remove('hidden');
                btn.classList.add('opacity-50', 'pointer-events-none');
            } else {
                warning.classList.add('hidden');
                btn.classList.remove('opacity-50', 'pointer-events-none');
            }
        }

        function eliminar(index) {
            carrito.splice(index, 1);
            actualizarCarrito();
        }

        function enviarWhatsApp() {
            const numero = "526531234567"; // CAMBIA ESTO POR TU N√öMERO
            let mensaje = "¬°Hola Ah√≠TeEncargo SLRC! üçü%0AQuiero hacer un pedido:%0A%0A";
            carrito.forEach(p => mensaje += `- ${p.nombre} ($${p.precio})%0A`);
            
            const total = document.getElementById('total-final').innerText;
            mensaje += `%0A*Total con env√≠o:* ${total}%0A%0A¬øMe confirman mi pedido?`;
            
            window.open(`https://wa.me/${numero}?text=${mensaje}`, '_blank');
        }

        renderProductos();
    </script>
</body>
</html>